(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(t,e,n){t.exports=n(34)},32:function(t,e,n){},34:function(t,e,n){"use strict";n.r(e);var i=n(1),r=n(2),o=n(0),s=n.n(o),a=n(16),c=n.n(a),u=n(4),l=n(5),h=n(7),d=n(6),f=n(8),v=n(9),p=n(17),g=n.n(p);var m={ge:function(t,e,n,i,r){return"function"===typeof n?function(t,e,n,i,r){for(var o=n+1;e<=n;){var s=e+n>>>1;r(t[s],i)>=0?(o=s,n=s-1):e=s+1}return o}(t,void 0===i?0:0|i,void 0===r?t.length-1:0|r,e,n):function(t,e,n,i){for(var r=n+1;e<=n;){var o=e+n>>>1;t[o]>=i?(r=o,n=o-1):e=o+1}return r}(t,void 0===n?0:0|n,void 0===i?t.length-1:0|i,e)},gt:function(t,e,n,i,r){return"function"===typeof n?function(t,e,n,i,r){for(var o=n+1;e<=n;){var s=e+n>>>1;r(t[s],i)>0?(o=s,n=s-1):e=s+1}return o}(t,void 0===i?0:0|i,void 0===r?t.length-1:0|r,e,n):function(t,e,n,i){for(var r=n+1;e<=n;){var o=e+n>>>1;t[o]>i?(r=o,n=o-1):e=o+1}return r}(t,void 0===n?0:0|n,void 0===i?t.length-1:0|i,e)},lt:function(t,e,n,i,r){return"function"===typeof n?function(t,e,n,i,r){for(var o=e-1;e<=n;){var s=e+n>>>1;r(t[s],i)<0?(o=s,e=s+1):n=s-1}return o}(t,void 0===i?0:0|i,void 0===r?t.length-1:0|r,e,n):function(t,e,n,i){for(var r=e-1;e<=n;){var o=e+n>>>1;t[o]<i?(r=o,e=o+1):n=o-1}return r}(t,void 0===n?0:0|n,void 0===i?t.length-1:0|i,e)},le:function(t,e,n,i,r){return"function"===typeof n?function(t,e,n,i,r){for(var o=e-1;e<=n;){var s=e+n>>>1;r(t[s],i)<=0?(o=s,e=s+1):n=s-1}return o}(t,void 0===i?0:0|i,void 0===r?t.length-1:0|r,e,n):function(t,e,n,i){for(var r=e-1;e<=n;){var o=e+n>>>1;t[o]<=i?(r=o,e=o+1):n=o-1}return r}(t,void 0===n?0:0|n,void 0===i?t.length-1:0|i,e)},eq:function(t,e,n,i,r){return"function"===typeof n?function(t,e,n,i,r){for(;e<=n;){var o=e+n>>>1,s=r(t[o],i);if(0===s)return o;s<=0?e=o+1:n=o-1}return-1}(t,void 0===i?0:0|i,void 0===r?t.length-1:0|r,e,n):function(t,e,n,i){for(;e<=n;){var r=e+n>>>1,o=t[r];if(o===i)return r;o<=i?e=r+1:n=r-1}return-1}(t,void 0===n?0:0|n,void 0===i?t.length-1:0|i,e)}},y=0,E=1;function b(t,e,n,i,r){this.mid=t,this.left=e,this.right=n,this.leftPoints=i,this.rightPoints=r,this.count=(e?e.count:0)+(n?n.count:0)+i.length}var I=b.prototype;function P(t,e){t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function T(t,e){var n=R(e);t.mid=n.mid,t.left=n.left,t.right=n.right,t.leftPoints=n.leftPoints,t.rightPoints=n.rightPoints,t.count=n.count}function x(t,e){var n=t.intervals([]);n.push(e),T(t,n)}function O(t,e){var n=t.intervals([]),i=n.indexOf(e);return i<0?y:(n.splice(i,1),T(t,n),E)}function w(t,e,n){for(var i=0;i<t.length&&t[i][0]<=e;++i){var r=n(t[i]);if(r)return r}}function M(t,e,n){for(var i=t.length-1;i>=0&&t[i][1]>=e;--i){var r=n(t[i]);if(r)return r}}function j(t,e){for(var n=0;n<t.length;++n){var i=e(t[n]);if(i)return i}}function k(t,e){return t-e}function V(t,e){var n=t[0]-e[0];return n||t[1]-e[1]}function S(t,e){var n=t[1]-e[1];return n||t[0]-e[0]}function R(t){if(0===t.length)return null;for(var e=[],n=0;n<t.length;++n)e.push(t[n][0],t[n][1]);e.sort(k);var i=e[e.length>>1],r=[],o=[],s=[];for(n=0;n<t.length;++n){var a=t[n];a[1]<i?r.push(a):i<a[0]?o.push(a):s.push(a)}var c=s,u=s.slice();return c.sort(V),u.sort(S),new b(i,R(r),R(o),c,u)}function C(t){this.root=t}I.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t},I.insert=function(t){var e=this.count-this.leftPoints.length;if(this.count+=1,t[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?x(this,t):this.left.insert(t):this.left=R([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?x(this,t):this.right.insert(t):this.right=R([t]);else{var n=m.ge(this.leftPoints,t,V),i=m.ge(this.rightPoints,t,S);this.leftPoints.splice(n,0,t),this.rightPoints.splice(i,0,t)}},I.remove=function(t){var e=this.count-this.leftPoints;if(t[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(e-1)?O(this,t):2===(o=this.left.remove(t))?(this.left=null,this.count-=1,E):(o===E&&(this.count-=1),o):y;if(t[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(e-1)?O(this,t):2===(o=this.right.remove(t))?(this.right=null,this.count-=1,E):(o===E&&(this.count-=1),o):y;if(1===this.count)return this.leftPoints[0]===t?2:y;if(1===this.leftPoints.length&&this.leftPoints[0]===t){if(this.left&&this.right){for(var n=this,i=this.left;i.right;)n=i,i=i.right;if(n===this)i.right=this.right;else{var r=this.left,o=this.right;n.count-=i.count,n.right=i.left,i.left=r,i.right=o}P(this,i),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?P(this,this.left):P(this,this.right);return E}for(r=m.ge(this.leftPoints,t,V);r<this.leftPoints.length&&this.leftPoints[r][0]===t[0];++r)if(this.leftPoints[r]===t){this.count-=1,this.leftPoints.splice(r,1);for(o=m.ge(this.rightPoints,t,S);o<this.rightPoints.length&&this.rightPoints[o][1]===t[1];++o)if(this.rightPoints[o]===t)return this.rightPoints.splice(o,1),E}return y},I.queryPoint=function(t,e){if(t<this.mid){if(this.left)if(n=this.left.queryPoint(t,e))return n;return w(this.leftPoints,t,e)}if(t>this.mid){var n;if(this.right)if(n=this.right.queryPoint(t,e))return n;return M(this.rightPoints,t,e)}return j(this.leftPoints,e)},I.queryInterval=function(t,e,n){var i;if(t<this.mid&&this.left&&(i=this.left.queryInterval(t,e,n)))return i;if(e>this.mid&&this.right&&(i=this.right.queryInterval(t,e,n)))return i;return e<this.mid?w(this.leftPoints,e,n):t>this.mid?M(this.rightPoints,t,n):j(this.leftPoints,n)};var A=C.prototype;function q(t){return t&&0!==t.length?new C(R(t)):new C(null)}A.insert=function(t){this.root?this.root.insert(t):this.root=new b(t[0],null,null,[t],[t])},A.remove=function(t){if(this.root){var e=this.root.remove(t);return 2===e&&(this.root=null),e!==y}return!1},A.queryPoint=function(t,e){if(this.root)return this.root.queryPoint(t,e)},A.queryInterval=function(t,e,n){if(t<=e&&this.root)return this.root.queryInterval(t,e,n)},Object.defineProperty(A,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(A,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});var D=n(3),N=n(11);function X(t,e){var n=new Map(t.map(function(t){return[t.id,t]})),i=new Map(e.map(function(t){return[t.id,t]})),r=[],o=[];return n.forEach(function(t,e){i.has(e)&&n.get(e)===i.get(e)||o.push(t)}),i.forEach(function(t,e){n.has(e)&&n.get(e)===i.get(e)||r.push(t)}),{itemsAdded:r,itemsRemoved:o}}var Y=function(t){function e(){var t,n;Object(u.a)(this,e);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(r)))).handleStop=function(t){n.props.onAction({type:"ITEM_DRAGGED",payload:{vertexEl:t.el,finalPos:t.finalPos}})},n.removeConnectionsAndEndpoints=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(t){return n.plumbConnections[t.id]}).forEach(function(t){var e=t.endpoints;n.plumbInstance.deleteConnection(t),n.plumbInstance.deleteEndpoint(e[0]),n.plumbInstance.deleteEndpoint(e[1])})},n.addConnectionsAndEndpoints=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t){var e=n.plumbInstance.addEndpoint(t.sourceId,Object(D.a)({},t.sourceEndpointStyles||n.props.sourceEndpointStyles,t.sourceEndpointOptions||n.props.sourceEndpointOptions,{isSource:!0})),i=n.plumbInstance.addEndpoint(t.targetId,Object(D.a)({},t.targetEndpointStyles||n.props.targetEndpointStyles,t.targetEndpointOptions||n.props.targetEndpointOptions,{isTarget:!0}));n.plumbConnections[t.id]=n.plumbInstance.connect(Object(D.a)({},t.styles||n.props.edgeStyles,t.options||n.props.edgeOptions,{source:e,target:i,overlays:t.overlays}))})},n}return Object(f.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;N.jsPlumb.ready(function(){t.plumbInstance=N.jsPlumb.getInstance(t.props.containerEl),t.plumbConnections={},t.drawConnections(),t.makeVerticesDraggable(t.props.vertices)})}},{key:"componentDidUpdate",value:function(t){t.edges!==this.props.edges&&this.updateConnections(X(t.edges,this.props.edges)),t.vertices!==this.props.vertices&&this.updateVertices(X(t.vertices,this.props.vertices))}},{key:"makeVerticesDraggable",value:function(t){var e=this;t.map(function(t){e.plumbInstance.draggable(t.id,{stop:e.handleStop})})}},{key:"updateConnections",value:function(t){var e=t.itemsAdded,n=t.itemsRemoved;this.removeConnectionsAndEndpoints(n),this.addConnectionsAndEndpoints(e)}},{key:"updateVertices",value:function(t){var e=t.itemsAdded;t.itemsRemoved;this.makeVerticesDraggable(e)}},{key:"drawConnections",value:function(){this.addConnectionsAndEndpoints(this.props.edges)}},{key:"render",value:function(){return null}}]),e}(o.PureComponent);Y.displayName="Edges",Y.defaultProps={sourceEndpointStyles:{paintStyle:{radius:1},connectorPaintStyle:{stroke:"blue",strokeWidth:0}},sourceEndpointOptions:{anchor:"Bottom"},targetEndpointStyles:{paintStyle:{fill:"blue",radius:1},connectorPaintStyle:{stroke:"blue",strokeWidth:0}},targetEndpointOptions:{anchor:"Top"},edgeStyles:{paintStyle:{stroke:"black"},connector:["Flowchart",{curviness:0,cornerRadius:20}]}};var F=Y,G=Object(v.a)(function(t){return t.reduce(function(t,e){return t.rightMostVertex.left<e.left&&(t.rightMostVertex=e),t.bottomMostVertex.top<e.top&&(t.bottomMostVertex=e),t},{rightMostVertex:{left:-1},bottomMostVertex:{top:-1}})}),L=Object(v.a)(function(t,e,n,i,o){var s=new Map(t.map(function(t,e){return[t.id,{vertex:t,index:e}]})),a=new Map,c=new Map,u=new Map;return n.queryInterval(e.xMin,e.xMax,function(t){var e=Object(r.a)(t,3),n=(e[0],e[1],e[2]);a.set(n,s.get(n))}),i.queryInterval(e.yMin,e.yMax,function(t){var e=Object(r.a)(t,3),n=(e[0],e[1],e[2]);c.set(n,s.get(n))}),a.forEach(function(t,e){c.has(e)&&u.set(e,t)}),u});function B(t,e,n){var i=t.get(n);i?i.push(e):t.set(n,[e])}function J(t,e,n){var i=t.get(n);i&&(i=i.filter(function(t){return t.id!==e})),i&&i.length?t.set(n,i):t.delete(n)}var U=Object(v.a)(function(t,e,n,i){return{xMin:t,xMax:t+n,yMin:e,yMax:e+i}});function W(t,e,n){t.remove(e[n]),delete e[n]}function _(t,e){var n=t||0;return[n,n+(e||0)]}var z=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(h.a)(this,Object(d.a)(e).call(this,t))).addToXIntervalTree=function(t){var e=function(t){return[].concat(Object(i.a)(_(t.left,t.width)),[t.id])}(t);n.xIntervalTreeNodes[t.id]=e,n.xIntervalTree.insert(e)},n.addToYIntervalTree=function(t){var e=function(t){return[].concat(Object(i.a)(_(t.top,t.height)),[t.id])}(t);n.yIntervalTreeNodes[t.id]=e,n.yIntervalTree.insert(e)},n.addEdgeToVerticesToEdgesMap=function(t){B(n.verticesToEdgesMap,t,t.sourceId),B(n.verticesToEdgesMap,t,t.targetId)},n.removeEdgeFromVerticesToEdgesMap=function(t){J(n.verticesToEdgesMap,t.id,t.sourceId),J(n.verticesToEdgesMap,t.id,t.targetId)},n.updateScroll=g()(function(t){n.setState({scroll:{left:t.scrollLeft,top:t.scrollTop}})},0),n.handleScroll=function(t){t.target===t.currentTarget&&n.updateScroll(t.currentTarget)},n.state={scroll:{left:0,top:0},container:{height:0,width:0},version:0,isContainerElReady:!1},n.vertices=t.vertices,n.containerRef=s.a.createRef(),n.initIntervalTrees(),n.initVerticesToEdgesMap(t.vertices,t.edges),n}return Object(f.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this.containerRef.current.getBoundingClientRect(),e=t.height,n=t.width;this.setState({container:{height:e,width:n},isContainerElReady:!0})}},{key:"componentDidUpdate",value:function(t,e,n){var i=!1;t.vertices!==this.props.vertices&&(this.vertices=this.props.vertices,this.updateIntervalTrees(X(t.vertices,this.props.vertices)),i=!0),t.edges!==this.props.edges&&(this.updateEdges(X(t.edges,this.props.edges)),i=!0),i&&this.setState(function(t){return{version:t.version+1}})}},{key:"initIntervalTrees",value:function(){this.initXIntervalTree(this.props.vertices),this.initYIntervalTree(this.props.vertices)}},{key:"initXIntervalTree",value:function(t){this.xIntervalTree=q(),this.xIntervalTreeNodes={},t.forEach(this.addToXIntervalTree)}},{key:"initYIntervalTree",value:function(t){this.yIntervalTree=q(),this.yIntervalTreeNodes={},t.forEach(this.addToYIntervalTree)}},{key:"initVerticesToEdgesMap",value:function(t,e){this.verticesToEdgesMap=e.reduce(function(t,e){return B(t,e,e.sourceId),B(t,e,e.targetId),t},new Map)}},{key:"updateIntervalTrees",value:function(t){var e=this,n=t.itemsAdded;t.itemsRemoved.forEach(function(t){var n=t.id;W(e.xIntervalTree,e.xIntervalTreeNodes,n),W(e.yIntervalTree,e.yIntervalTreeNodes,n)}),n.forEach(function(t){e.addToXIntervalTree(t),e.addToYIntervalTree(t)})}},{key:"updateEdges",value:function(t){var e=t.itemsAdded;t.itemsRemoved.forEach(this.removeEdgeFromVerticesToEdgesMap),e.forEach(this.addEdgeToVerticesToEdgesMap)}},{key:"getVisibleVertices",value:function(){var t=this.state,e=t.scroll,n=t.container,i=t.version;return L(this.vertices,U(e.left,e.top,n.width,n.height),this.xIntervalTree,this.yIntervalTree,i)}},{key:"renderSentinel",value:function(){var t=G(this.vertices),e=t.rightMostVertex,n=t.bottomMostVertex,i=e.left+e.width+100,r=n.top+n.width+100;return s.a.createElement("div",{style:{height:1,width:1,position:"absolute",left:0,top:0,transform:"translate3d(".concat(i,"px, ").concat(r,"px, 0)")}})}},{key:"renderVertices",value:function(t){var e=this;return t.map(function(t){var n=t.vertex,i=t.index;return s.a.createElement(s.a.Fragment,{key:n.id},e.props.renderVertex({vertex:n,index:i}))})}},{key:"renderEdges",value:function(t,e){return this.state.isContainerElReady?s.a.createElement(F,{onAction:this.props.onAction,edges:Object(i.a)(t.values()),vertices:e.map(function(t){return t.vertex}),containerEl:this.containerRef.current,sourceEndpointStyles:this.props.sourceEndpointStyles,sourceEndpointOptions:this.props.sourceEndpointOptions,targetEndpointStyles:this.props.targetEndpointStyles,targetEndpointOptions:this.props.targetEndpointOptions,edgeStyles:this.props.edgeStyles}):null}},{key:"render",value:function(){var t=this.getVisibleVertices(),e=function(t,e,n){var r=new Map(n.map(function(t,e){return[t.id,{vertex:t,index:e}]}));return Object(i.a)(t.values()).reduce(function(n,i){var o=i.vertex;return(e.get(o.id)||[]).forEach(function(e){n.edges.set(e.id,e),t.has(e.sourceId)||n.missedVertices.set(e.sourceId,r.get(e.sourceId)),t.has(e.targetId)||n.missedVertices.set(e.targetId,r.get(e.targetId))}),n},{edges:new Map,missedVertices:new Map})}(t,this.verticesToEdgesMap,this.vertices),n=e.edges,r=e.missedVertices,o=[].concat(Object(i.a)(t.values()),Object(i.a)(r.values()));return s.a.createElement("div",{style:{height:"100%",overflow:"auto",position:"relative"},ref:this.containerRef,className:"diagramContainer",onScroll:this.handleScroll},this.renderVertices(o),this.renderEdges(n,o),this.renderSentinel())}}]),e}(s.a.PureComponent);z.defaultProps={edges:[]};var H=z,K=200,Q=200,Z={initialVertices:[{left:300,top:100,width:K,height:Q,label:"Root",id:"r"},{left:300-K,top:500,width:K,height:Q,label:"L1",id:"l1"},{left:300+K,top:500,width:K,height:Q,label:"R1",id:"r1"},{left:500-K,top:1e3,width:K,height:Q,label:"R1L2",id:"r1l2"},{left:500+K,top:1e3,width:K,height:Q,label:"R1R2",id:"r1r2"},{left:500+K-K,top:1500,width:K,height:Q,label:"R1R2L3",id:"r1r2l3"},{left:500+K+K,top:1500,width:K,height:Q,label:"R1R2R3",id:"r1r2r3"}].map(function(t){return Object(D.a)({},t,{top:t.top+1e3})}),initialEdges:[{id:"r-l1"},{id:"r-r1"},{id:"r1-r1l2"},{id:"r1-r1r2"},{id:"r1r2-r1r2l3"},{id:"r1r2-r1r2r3"}].map(function(t){return Object(D.a)({},t,{sourceId:t.id.split("-")[0],targetId:t.id.split("-")[1]})})};function $(t){return{vertices:t.initialVertices,edges:t.initialEdges}}function tt(t,e){switch(e.type){case"ITEM_DRAGGED":var n=t.vertices.map(function(t){return t.id===e.payload.vertexEl.dataset.id?Object(D.a)({},t,{left:e.payload.finalPos[0],top:e.payload.finalPos[1]}):t});return Object(D.a)({},t,{vertices:n})}}function et(t){var e=t.vertex,n=t.index;return s.a.createElement("div",{id:e.id,className:"vertex",style:{height:e.height,width:e.width,position:"absolute",left:e.left,top:e.top},"data-id":e.id,"data-index":n},s.a.createElement("span",null,n))}n(32);var nt=document.getElementById("root");c.a.render(s.a.createElement(function(){var t=Object(o.useReducer)(tt,Z,$),e=Object(r.a)(t,2),n=e[0],i=e[1],a=Object(o.useCallback)(function(t){var e=t.vertex,n=t.index;return s.a.createElement(et,{vertex:e,index:n})},[]);return s.a.createElement(H,{onAction:i,vertices:n.vertices,edges:n.edges,renderVertex:a})},null),nt)}},[[18,2,1]]]);
//# sourceMappingURL=main.e880cf1d.chunk.js.map